<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Class ShardedMap::Shard" href="classsharded__map_1_1ShardedMap_1_1Shard.html" /><link rel="prev" title="Template Struct unify_ints" href="structsharded__map_1_1util_1_1unify__ints.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.04.27 -->
        <title>Template Class ShardedMap - sharded_map documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=437aa6ec" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-treeview/bootstrap-treeview.min.css?v=8176a87d" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">sharded_map  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">sharded_map  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">sharded_map</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="library_root.html">sharded_map API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of sharded_map API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="namespace_sharded_map.html">Namespace sharded_map</a></li>
<li class="toctree-l2"><a class="reference internal" href="namespace_sharded_map__update_functions.html">Namespace sharded_map::update_functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="namespace_sharded_map__util.html">Namespace sharded_map::util</a></li>
<li class="toctree-l2"><a class="reference internal" href="structsharded__map_1_1update__functions_1_1Keep.html">Template Struct Keep</a></li>
<li class="toctree-l2"><a class="reference internal" href="structsharded__map_1_1update__functions_1_1Overwrite.html">Template Struct Overwrite</a></li>
<li class="toctree-l2"><a class="reference internal" href="structsharded__map_1_1util_1_1unify__ints.html">Template Struct unify_ints</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Template Class ShardedMap</a></li>
<li class="toctree-l2"><a class="reference internal" href="classsharded__map_1_1ShardedMap_1_1Shard.html">Class ShardedMap::Shard</a></li>
<li class="toctree-l2"><a class="reference internal" href="function_namespacesharded__map_1_1util_1ab9030a4508f62dcc1c4deffab5bf6aab.html">Function sharded_map::util::ceil_div</a></li>
<li class="toctree-l2"><a class="reference internal" href="function_namespacesharded__map_1_1util_1a37b92017cf92f5f92ed026e2243f5ab2.html">Function sharded_map::util::mix_select</a></li>
<li class="toctree-l2"><a class="reference internal" href="typedef_namespacesharded__map_1_1util_1a9784ef71364e349a5fd1fa4fffbbdb2d.html">Typedef sharded_map::util::unify_ints_t</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="template-class-shardedmap">
<span id="exhale-class-classsharded-map-1-1shardedmap"></span><h1>Template Class ShardedMap<a class="headerlink" href="#template-class-shardedmap" title="Permalink to this heading">¶</a></h1>
<ul class="simple">
<li><p>Defined in <a class="reference internal" href="file_sharded_map_sharded_map.hpp.html#file-sharded-map-sharded-map-hpp"><span class="std std-ref">File sharded_map.hpp</span></a></p></li>
</ul>
<section id="nested-relationships">
<h2>Nested Relationships<a class="headerlink" href="#nested-relationships" title="Permalink to this heading">¶</a></h2>
<section id="nested-types">
<h3>Nested Types<a class="headerlink" href="#nested-types" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="classsharded__map_1_1ShardedMap_1_1Shard.html#exhale-class-classsharded-map-1-1shardedmap-1-1shard"><span class="std std-ref">Class ShardedMap::Shard</span></a></p></li>
</ul>
</section>
</section>
<section id="class-documentation">
<h2>Class Documentation<a class="headerlink" href="#class-documentation" title="Permalink to this heading">¶</a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE">
<span id="_CPPv3I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE"></span><span id="_CPPv2I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">copy_constructible</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">K</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">move_constructible</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">V</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">typename</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">typename</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SeqHashMapType</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">unordered_map</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">UpdateFunction</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::V"><span class="n"><span class="pre">V</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">UpdateFn</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">update_functions</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="structsharded__map_1_1update__functions_1_1Overwrite.html#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEEN11sharded_map16update_functions9OverwriteE" title="sharded_map::update_functions::Overwrite"><span class="n"><span class="pre">Overwrite</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::V"><span class="n"><span class="pre">V</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classsharded__map_1_1ShardedMap"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ShardedMap</span></span></span><a class="headerlink" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A hash map that must be used by multiple threads, each thread having only having write access to a certain segment of the hash input space. </p>
<p>Each processor has one queue and one local hash map.</p>
<p>To use this map with <code class="docutils literal notranslate"><span class="pre">p</span></code> threads, create a shard for each thread using <code class="docutils literal notranslate"><span class="pre">get_shard</span></code> with thread id’s ranging from 0 to (inclusively) p-1. Each possible hash has exactly one processor that is responsible for storing that hash. Inserting an element inserts it into its responsible processor’s queue. <code class="docutils literal notranslate"><span class="pre">handle_queue_sync</span></code> and <code class="docutils literal notranslate"><span class="pre">handle_queue_async</span></code> empty the processor’s queue and insert/update all values in the local hash map. <code class="docutils literal notranslate"><span class="pre">handle_queue_sync</span></code> is automatically called by a processor trying to insert a value, if the responsible thread’s queue is full. So, if all threads are continuously inserting elements, it should suffice for all processors to keep calling <code class="docutils literal notranslate"><span class="pre">insert</span></code> without manually handling the queues.</p>
<p>If not all processors are inserting elements at some point, then it becomes necessary for processors to handle the queues manually using any of the two <code class="docutils literal notranslate"><span class="pre">handle_queue</span></code> methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Template Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>K</strong> – The type of the keys in the hash map. </p></li>
<li><p><strong>V</strong> – The type of the values in the hash map. </p></li>
<li><p><strong>SeqHashMapType</strong> – The type of the hash map used internally. This should be compatible with std::unordered_map. </p></li>
<li><p><strong>UpdateFn</strong> – The update function deciding how to insert or update values in the map. </p></li>
</ul>
</dd>
</dl>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum-class">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap11WhereaboutsE">
<span id="_CPPv3N11sharded_map10ShardedMap11WhereaboutsE"></span><span id="_CPPv2N11sharded_map10ShardedMap11WhereaboutsE"></span><span class="target" id="classsharded__map_1_1ShardedMap_1a54bb2ae45e120b37cd2bad781dcc187b"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Whereabouts</span></span></span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap11WhereaboutsE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The whereabouts of a value in the sharded hash map. </p>
<p>The three variants denote, whether an element does not exist, is contained in a local hash map or is still inside a queue. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap11Whereabouts7NOWHEREE">
<span id="_CPPv3N11sharded_map10ShardedMap11Whereabouts7NOWHEREE"></span><span id="_CPPv2N11sharded_map10ShardedMap11Whereabouts7NOWHEREE"></span><span class="target" id="classsharded__map_1_1ShardedMap_1a54bb2ae45e120b37cd2bad781dcc187bab71eea4c12f4d54d96cfaf039b574689"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">NOWHERE</span></span></span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap11Whereabouts7NOWHEREE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap11Whereabouts6IN_MAPE">
<span id="_CPPv3N11sharded_map10ShardedMap11Whereabouts6IN_MAPE"></span><span id="_CPPv2N11sharded_map10ShardedMap11Whereabouts6IN_MAPE"></span><span class="target" id="classsharded__map_1_1ShardedMap_1a54bb2ae45e120b37cd2bad781dcc187ba531d6a3a92fd17afd3c7a8de8d5834c2"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">IN_MAP</span></span></span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap11Whereabouts6IN_MAPE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap11Whereabouts8IN_QUEUEE">
<span id="_CPPv3N11sharded_map10ShardedMap11Whereabouts8IN_QUEUEE"></span><span id="_CPPv2N11sharded_map10ShardedMap11Whereabouts8IN_QUEUEE"></span><span class="target" id="classsharded__map_1_1ShardedMap_1a54bb2ae45e120b37cd2bad781dcc187baeae92fb876111864092d0921b943f100"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">IN_QUEUE</span></span></span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap11Whereabouts8IN_QUEUEE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap10ShardedMapE6size_t6size_t">
<span id="_CPPv3N11sharded_map10ShardedMap10ShardedMapE6size_t6size_t"></span><span id="_CPPv2N11sharded_map10ShardedMap10ShardedMapE6size_t6size_t"></span><span id="sharded_map::ShardedMap::ShardedMap__s.s"></span><span class="target" id="classsharded__map_1_1ShardedMap_1a5b4ff0a81250ea157fcf544a960c765b"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ShardedMap</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">thread_count</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">queue_capacity</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap10ShardedMapE6size_t6size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Creates a new sharded map. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thread_count</strong> – The exact number of threads working on this map. Thread ids must be 0, 1, …, thread_count-1. </p></li>
<li><p><strong>queue_capacity</strong> – The maximum amount of elements allowed in each queue. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMapD0Ev">
<span id="_CPPv3N11sharded_map10ShardedMapD0Ev"></span><span id="_CPPv2N11sharded_map10ShardedMapD0Ev"></span><span id="sharded_map::ShardedMap::~ShardedMap"></span><span class="target" id="classsharded__map_1_1ShardedMap_1a14d65580209ba552fb8347bd4c27645d"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~ShardedMap</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMapD0Ev" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap13reset_barrierEv">
<span id="_CPPv3N11sharded_map10ShardedMap13reset_barrierEv"></span><span id="_CPPv2N11sharded_map10ShardedMap13reset_barrierEv"></span><span id="sharded_map::ShardedMap::reset_barrier"></span><span class="target" id="classsharded__map_1_1ShardedMap_1a420ce1241941bec66910ab33b212c073"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reset_barrier</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap13reset_barrierEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>When the thread barrier was modified (e.g. by calling <code class="docutils literal notranslate"><span class="pre">arrive_and_drop</span></code>), reset it to its original state, so insertions function properly again. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap9get_shardEK6size_t">
<span id="_CPPv3N11sharded_map10ShardedMap9get_shardEK6size_t"></span><span id="_CPPv2N11sharded_map10ShardedMap9get_shardEK6size_t"></span><span id="sharded_map::ShardedMap::get_shard__sC"></span><span class="target" id="classsharded__map_1_1ShardedMap_1ac5f7f14f625ec78d816191bf1691eedd"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N11sharded_map10ShardedMap5ShardE" title="sharded_map::ShardedMap::Shard"><span class="n"><span class="pre">Shard</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">get_shard</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">thread_id</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap9get_shardEK6size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create a shard for the given thread. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>thread_id</strong> – The id of the thread for which to create a shard. </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A shard for the given thread id. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK11sharded_map10ShardedMap4sizeEv">
<span id="_CPPv3NK11sharded_map10ShardedMap4sizeEv"></span><span id="_CPPv2NK11sharded_map10ShardedMap4sizeEv"></span><span id="sharded_map::ShardedMap::sizeC"></span><span class="target" id="classsharded__map_1_1ShardedMap_1a259cb5a711406a8c3e5d937eb9350cca"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">size</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK11sharded_map10ShardedMap4sizeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the number of key-value pairs in the map. </p>
<p>Note, that this method calculates the size for each map separately and is therefore not O(1). </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The number of key-value pairs in the map. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I_NSt6ranges19random_access_rangeE_20StateCreatorFunction_NSt8copyableE_25StatefulGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEER5Range13CreateStateFn11GeneratorFn">
<span id="_CPPv3I_NSt6ranges19random_access_rangeE_20StateCreatorFunction_NSt8copyableE_25StatefulGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEE5StateEEN11sharded_map10ShardedMap12batch_insertER5Range13CreateStateFn11GeneratorFn"></span><span id="_CPPv2I_NSt6ranges19random_access_rangeE_20StateCreatorFunction_NSt8copyableE_25StatefulGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEE5StateEEN11sharded_map10ShardedMap12batch_insertER5Range13CreateStateFn11GeneratorFn"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">ranges</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">random_access_range</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Range</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">StateCreatorFunction</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CreateStateFn</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">copyable</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">State</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">result_of_t</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt6ranges19random_access_rangeE_20StateCreatorFunction_NSt8copyableE_25StatefulGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEER5Range13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::CreateStateFn"><span class="n"><span class="pre">CreateStateFn</span></span></a><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">size_t</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">StatefulGeneratorFunction</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">InputValue</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">ranges</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">range_reference_t</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt6ranges19random_access_rangeE_20StateCreatorFunction_NSt8copyableE_25StatefulGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEER5Range13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::Range"><span class="n"><span class="pre">Range</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_NSt6ranges19random_access_rangeE_20StateCreatorFunction_NSt8copyableE_25StatefulGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEER5Range13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::State"><span class="n"><span class="pre">State</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">GeneratorFn</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classsharded__map_1_1ShardedMap_1a5bb157dd98be228aebaa93e119c40130"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt6ranges19random_access_rangeE_20StateCreatorFunction_NSt8copyableE_25StatefulGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEER5Range13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::State"><span class="n"><span class="pre">State</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">batch_insert</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I_NSt6ranges19random_access_rangeE_20StateCreatorFunction_NSt8copyableE_25StatefulGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEER5Range13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::Range"><span class="n"><span class="pre">Range</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">range</span></span>, <a class="reference internal" href="#_CPPv4I_NSt6ranges19random_access_rangeE_20StateCreatorFunction_NSt8copyableE_25StatefulGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEER5Range13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::CreateStateFn"><span class="n"><span class="pre">CreateStateFn</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">gen_state</span></span>, <a class="reference internal" href="#_CPPv4I_NSt6ranges19random_access_rangeE_20StateCreatorFunction_NSt8copyableE_25StatefulGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEER5Range13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::GeneratorFn"><span class="n"><span class="pre">GeneratorFn</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">generate_next</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I_NSt6ranges19random_access_rangeE_20StateCreatorFunction_NSt8copyableE_25StatefulGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEER5Range13CreateStateFn11GeneratorFn" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Batch inserts several elements in parallel with a thread-local state. </p>
<p>This iterates over a std::ranges::random_access_range (e.g. a std::vector or std:span).</p>
<p>The inserted elements are generated by a generator function which takes as arguments the current element of the range and a reference to the thread-local state.</p>
<p>This function allows creating mutable thread-local state instances of any type which are passed to each invocation of the generator function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>range</strong> – The range to iterate over. </p></li>
<li><p><strong>gen_state</strong> – A function that takes a size_t as input which is the thread id, and returns the initial thread-local state of this thread’s invocations of the generator function. This state may be of any desired type. </p></li>
<li><p><strong>generate_next</strong> – A function that generates key-value pairs to insert into the map. It takes a reference to the current element of the range and a reference to the current thread-local state and returns an std::pair&lt;K,InputValue&gt;, which is inserted into the map.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The a vector containing the final thread-local state for each thread. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I_NSt6ranges19random_access_rangeE_26StatelessGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEEEEN11sharded_map10ShardedMap12batch_insertEvR5Range11GeneratorFn">
<span id="_CPPv3I_NSt6ranges19random_access_rangeE_26StatelessGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEEEEN11sharded_map10ShardedMap12batch_insertER5Range11GeneratorFn"></span><span id="_CPPv2I_NSt6ranges19random_access_rangeE_26StatelessGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEEEEN11sharded_map10ShardedMap12batch_insertER5Range11GeneratorFn"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">ranges</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">random_access_range</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Range</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">StatelessGeneratorFunction</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">InputValue</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">ranges</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">range_reference_t</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt6ranges19random_access_rangeE_26StatelessGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEEEEN11sharded_map10ShardedMap12batch_insertEvR5Range11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::Range"><span class="n"><span class="pre">Range</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">GeneratorFn</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classsharded__map_1_1ShardedMap_1a0808a0e7cb884320d7bffaec1d0a6ab1"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">batch_insert</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I_NSt6ranges19random_access_rangeE_26StatelessGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEEEEN11sharded_map10ShardedMap12batch_insertEvR5Range11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::Range"><span class="n"><span class="pre">Range</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">range</span></span>, <a class="reference internal" href="#_CPPv4I_NSt6ranges19random_access_rangeE_26StatelessGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEEEEN11sharded_map10ShardedMap12batch_insertEvR5Range11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::GeneratorFn"><span class="n"><span class="pre">GeneratorFn</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">generate_next</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I_NSt6ranges19random_access_rangeE_26StatelessGeneratorFunctionI1K10InputValueNSt6ranges17range_reference_tI5RangeEEEEN11sharded_map10ShardedMap12batch_insertEvR5Range11GeneratorFn" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Batch inserts several elements in parallel with a thread-local state. </p>
<p>This iterates over a std::ranges::random_access_range (e.g. a std::vector or std:span).</p>
<p>The inserted elements are generated by a generator function which takes as arguments the current element of the range and a reference to the thread-local state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>range</strong> – The range to iterate over. </p></li>
<li><p><strong>generate_next</strong> – A function that generates key-value pairs to insert into the map. It takes the current index of the iteration as an argument and returns an std::pair&lt;K,InputValue&gt;, which is inserted into the map. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt22random_access_iteratorE_25StatefulGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE4Iter4Iter13CreateStateFn11GeneratorFn">
<span id="_CPPv3I_20StateCreatorFunction_NSt8copyableE_NSt22random_access_iteratorE_25StatefulGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEE5StateEEN11sharded_map10ShardedMap12batch_insertE4Iter4Iter13CreateStateFn11GeneratorFn"></span><span id="_CPPv2I_20StateCreatorFunction_NSt8copyableE_NSt22random_access_iteratorE_25StatefulGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEE5StateEEN11sharded_map10ShardedMap12batch_insertE4Iter4Iter13CreateStateFn11GeneratorFn"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">StateCreatorFunction</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CreateStateFn</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">copyable</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">State</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">result_of_t</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt22random_access_iteratorE_25StatefulGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE4Iter4Iter13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::CreateStateFn"><span class="n"><span class="pre">CreateStateFn</span></span></a><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">size_t</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">random_access_iterator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Iter</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">StatefulGeneratorFunction</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">InputValue</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">iter_reference_t</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt22random_access_iteratorE_25StatefulGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE4Iter4Iter13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::Iter"><span class="n"><span class="pre">Iter</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt22random_access_iteratorE_25StatefulGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE4Iter4Iter13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::State"><span class="n"><span class="pre">State</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">GeneratorFn</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classsharded__map_1_1ShardedMap_1a2dc382419e11841bd067279715657044"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt22random_access_iteratorE_25StatefulGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE4Iter4Iter13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::State"><span class="n"><span class="pre">State</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">batch_insert</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt22random_access_iteratorE_25StatefulGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE4Iter4Iter13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::Iter"><span class="n"><span class="pre">Iter</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">begin</span></span>, <a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt22random_access_iteratorE_25StatefulGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE4Iter4Iter13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::Iter"><span class="n"><span class="pre">Iter</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">end</span></span>, <a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt22random_access_iteratorE_25StatefulGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE4Iter4Iter13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::CreateStateFn"><span class="n"><span class="pre">CreateStateFn</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">gen_state</span></span>, <a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt22random_access_iteratorE_25StatefulGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE4Iter4Iter13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::GeneratorFn"><span class="n"><span class="pre">GeneratorFn</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">generate_next</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt22random_access_iteratorE_25StatefulGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE4Iter4Iter13CreateStateFn11GeneratorFn" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Batch inserts several elements in parallel with a thread-local state. </p>
<p>This iterates over a pair of std::random_access_iterator (e.g. an iterator of std::vector, std:span, std::string, etc).</p>
<p>The inserted elements are generated by a generator function which takes as arguments the current element returned by the iterator and a reference to the thread-local state.</p>
<p>This function allows creating mutable thread-local state instances of any type which are passed to each invocation of the generator function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>begin</strong> – The start iterator. </p></li>
<li><p><strong>end</strong> – The end iterator. </p></li>
<li><p><strong>gen_state</strong> – A function that takes a size_t as input which is the thread id, and returns the initial thread-local state of this thread’s invocations of the generator function. This state may be of any desired type. </p></li>
<li><p><strong>generate_next</strong> – A function that generates key-value pairs to insert into the map. It takes the current index of the iteration as an argument and returns an std::pair&lt;K,InputValue&gt;, which is inserted into the map. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I_NSt22random_access_iteratorE_26StatelessGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEEEEN11sharded_map10ShardedMap12batch_insertEv4Iter4Iter11GeneratorFn">
<span id="_CPPv3I_NSt22random_access_iteratorE_26StatelessGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEEEEN11sharded_map10ShardedMap12batch_insertE4Iter4Iter11GeneratorFn"></span><span id="_CPPv2I_NSt22random_access_iteratorE_26StatelessGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEEEEN11sharded_map10ShardedMap12batch_insertE4Iter4Iter11GeneratorFn"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">random_access_iterator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Iter</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">StatelessGeneratorFunction</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">InputValue</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">iter_reference_t</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt22random_access_iteratorE_26StatelessGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEEEEN11sharded_map10ShardedMap12batch_insertEv4Iter4Iter11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::Iter"><span class="n"><span class="pre">Iter</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">GeneratorFn</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classsharded__map_1_1ShardedMap_1a27026fe0caaf2267f4a7eedb93247b0e"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">batch_insert</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I_NSt22random_access_iteratorE_26StatelessGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEEEEN11sharded_map10ShardedMap12batch_insertEv4Iter4Iter11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::Iter"><span class="n"><span class="pre">Iter</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">begin</span></span>, <a class="reference internal" href="#_CPPv4I_NSt22random_access_iteratorE_26StatelessGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEEEEN11sharded_map10ShardedMap12batch_insertEv4Iter4Iter11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::Iter"><span class="n"><span class="pre">Iter</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">end</span></span>, <a class="reference internal" href="#_CPPv4I_NSt22random_access_iteratorE_26StatelessGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEEEEN11sharded_map10ShardedMap12batch_insertEv4Iter4Iter11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::GeneratorFn"><span class="n"><span class="pre">GeneratorFn</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">generate_next</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I_NSt22random_access_iteratorE_26StatelessGeneratorFunctionI1K10InputValueNSt16iter_reference_tI4IterEEEEN11sharded_map10ShardedMap12batch_insertEv4Iter4Iter11GeneratorFn" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Batch inserts several elements in parallel with a thread-local state. </p>
<p>This iterates over a pair of std::random_access_iterator (e.g. an iterator of std::vector, std:span, std::string, etc).</p>
<p>The inserted elements are generated by a generator function which takes as arguments the current element returned by the iterator and a reference to the thread-local state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>begin</strong> – The start iterator. </p></li>
<li><p><strong>end</strong> – The end iterator. </p></li>
<li><p><strong>generate_next</strong> – A function that generates key-value pairs to insert into the map. It takes the current index of the iteration as an argument and returns an std::pair&lt;K,InputValue&gt;, which is inserted into the map. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE12StartIntType10EndIntType13CreateStateFn11GeneratorFn">
<span id="_CPPv3I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertE12StartIntType10EndIntType13CreateStateFn11GeneratorFn"></span><span id="_CPPv2I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertE12StartIntType10EndIntType13CreateStateFn11GeneratorFn"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">StateCreatorFunction</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CreateStateFn</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">copyable</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">State</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">result_of_t</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE12StartIntType10EndIntType13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::CreateStateFn"><span class="n"><span class="pre">CreateStateFn</span></span></a><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">size_t</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">integral</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">StartIntType</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">integral</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EndIntType</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">StatefulGeneratorFunction</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">InputValue</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">util</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="typedef_namespacesharded__map_1_1util_1a9784ef71364e349a5fd1fa4fffbbdb2d.html#_CPPv4I_NSt8integralE_NSt8integralEEN11sharded_map4util12unify_ints_tE" title="sharded_map::util::unify_ints_t"><span class="n"><span class="pre">unify_ints_t</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE12StartIntType10EndIntType13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::StartIntType"><span class="n"><span class="pre">StartIntType</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE12StartIntType10EndIntType13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::EndIntType"><span class="n"><span class="pre">EndIntType</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE12StartIntType10EndIntType13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::State"><span class="n"><span class="pre">State</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">GeneratorFn</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classsharded__map_1_1ShardedMap_1ac2d6f98478e1235fa6df74c2a80de84c"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE12StartIntType10EndIntType13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::State"><span class="n"><span class="pre">State</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">batch_insert</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE12StartIntType10EndIntType13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::StartIntType"><span class="n"><span class="pre">StartIntType</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">begin</span></span>, <a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE12StartIntType10EndIntType13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::EndIntType"><span class="n"><span class="pre">EndIntType</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">end</span></span>, <a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE12StartIntType10EndIntType13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::CreateStateFn"><span class="n"><span class="pre">CreateStateFn</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">gen_state</span></span>, <a class="reference internal" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE12StartIntType10EndIntType13CreateStateFn11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::GeneratorFn"><span class="n"><span class="pre">GeneratorFn</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">generate_next</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I_20StateCreatorFunction_NSt8copyableE_NSt8integralE_NSt8integralE_25StatefulGeneratorFunctionI1K10InputValueN4util12unify_ints_tI12StartIntType10EndIntTypeEE5StateEEN11sharded_map10ShardedMap12batch_insertENSt6vectorI5StateEE12StartIntType10EndIntType13CreateStateFn11GeneratorFn" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Batch inserts several elements in parallel with a thread-local state. </p>
<p>The inserted elements are generated by a generator function which takes as arguments the current iteration index and a reference to the thread-local state.</p>
<p>This function allows creating mutable thread-local state instances of any type which are passed to each invocation of the generator function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>begin</strong> – The start index if the iteration. </p></li>
<li><p><strong>end</strong> – The (exclusive) end index of the iteration </p></li>
<li><p><strong>gen_state</strong> – A function that takes a size_t as input which is the thread id, and returns the initial thread-local state of this thread’s invocations of the generator function. This state may be of any desired type. </p></li>
<li><p><strong>generate_next</strong> – A function that generates key-value pairs to insert into the map. It takes the current index of the iteration and a reference to the current thread-local state and returns an std::pair&lt;K,InputValue&gt;, which is inserted into the map.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The a vector containing the final thread-local state for each thread. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I_26StatelessGeneratorFunctionI1K10InputValue6size_tEEN11sharded_map10ShardedMap12batch_insertEvNSt8integralENSt8integralE11GeneratorFn">
<span id="_CPPv3I_26StatelessGeneratorFunctionI1K10InputValue6size_tEEN11sharded_map10ShardedMap12batch_insertENSt8integralENSt8integralE11GeneratorFn"></span><span id="_CPPv2I_26StatelessGeneratorFunctionI1K10InputValue6size_tEEN11sharded_map10ShardedMap12batch_insertENSt8integralENSt8integralE11GeneratorFn"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">StatelessGeneratorFunction</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">InputValue</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">GeneratorFn</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classsharded__map_1_1ShardedMap_1a2d270f266be3e11956d2e2a2ef21897c"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">batch_insert</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">integral</span></span><span class="w"> </span><span class="k"><span class="pre">auto</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">begin</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">integral</span></span><span class="w"> </span><span class="k"><span class="pre">auto</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">end</span></span>, <a class="reference internal" href="#_CPPv4I_26StatelessGeneratorFunctionI1K10InputValue6size_tEEN11sharded_map10ShardedMap12batch_insertEvNSt8integralENSt8integralE11GeneratorFn" title="sharded_map::ShardedMap::batch_insert::GeneratorFn"><span class="n"><span class="pre">GeneratorFn</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">generate_next</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I_26StatelessGeneratorFunctionI1K10InputValue6size_tEEN11sharded_map10ShardedMap12batch_insertEvNSt8integralENSt8integralE11GeneratorFn" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Batch inserts several elements in parallel with a thread-local state. </p>
<p>The inserted elements are generated by a generator function which takes as arguments the current iteration index and a reference to the thread-local state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> – The start index if the iteration. </p></li>
<li><p><strong>end</strong> – The (exclusive) end index of the iteration </p></li>
<li><p><strong>gen_state</strong> – A function that takes a size_t as input which is the thread id, and returns the initial thread-local state of this thread’s invocations of the generator function. This state may be of any desired type. </p></li>
<li><p><strong>generate_next</strong> – A function that generates key-value pairs to insert into the map. It takes the current index of the iteration as an argument and returns an std::pair&lt;K,InputValue&gt;, which is inserted into the map. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap5whereERK1K">
<span id="_CPPv3N11sharded_map10ShardedMap5whereERK1K"></span><span id="_CPPv2N11sharded_map10ShardedMap5whereERK1K"></span><span id="sharded_map::ShardedMap::where__KCR"></span><span class="target" id="classsharded__map_1_1ShardedMap_1a3fd8cafafdeedaa292a01586db04a458"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N11sharded_map10ShardedMap11WhereaboutsE" title="sharded_map::ShardedMap::Whereabouts"><span class="n"><span class="pre">Whereabouts</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">where</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">k</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap5whereERK1K" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Searches a hash map and queue to determine whether the given key exists in the sharded hash table. </p>
<p>Note, that this is not efficient and only for debug purposes. The time complexity is linear in the queue size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>k</strong> – The key to search for. </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>NOWHERE, if the element does not exist. IN_MAP, if the element exists in a hash map. IN_QUEUE, if the element exists in a queue. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK11sharded_map10ShardedMap8for_eachENSt9invocableIRK1KRK1VEE">
<span id="_CPPv3NK11sharded_map10ShardedMap8for_eachENSt9invocableIRK1KRK1VEE"></span><span id="_CPPv2NK11sharded_map10ShardedMap8for_eachENSt9invocableIRK1KRK1VEE"></span><span id="sharded_map::ShardedMap::for_each__std::invocable:KCR.VCR:C"></span><span class="target" id="classsharded__map_1_1ShardedMap_1a71380a04c25654c6a25c328fbb379ab4"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">for_each</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">invocable</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::V"><span class="n"><span class="pre">V</span></span></a><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="k"><span class="pre">auto</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">f</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK11sharded_map10ShardedMap8for_eachENSt9invocableIRK1KRK1VEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Runs a method for each value in the map. </p>
<p>The given function must take const references to a key and a value respectively. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>f</strong> – The function or lambda to run for each value. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap3endEv">
<span id="_CPPv3N11sharded_map10ShardedMap3endEv"></span><span id="_CPPv2N11sharded_map10ShardedMap3endEv"></span><span id="sharded_map::ShardedMap::end"></span><span class="target" id="classsharded__map_1_1ShardedMap_1ae31b17e1c99a7043eb377e6d5b2ac050"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">SeqHashMap</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">iterator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">end</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap3endEv" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap4findERK1K">
<span id="_CPPv3N11sharded_map10ShardedMap4findERK1K"></span><span id="_CPPv2N11sharded_map10ShardedMap4findERK1K"></span><span id="sharded_map::ShardedMap::find__KCR"></span><span class="target" id="classsharded__map_1_1ShardedMap_1a16c96f19a5657a28717b5f9f529712fb"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">SeqHashMap</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">iterator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">find</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">key</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap4findERK1K" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK11sharded_map10ShardedMap11queue_loadsEv">
<span id="_CPPv3NK11sharded_map10ShardedMap11queue_loadsEv"></span><span id="_CPPv2NK11sharded_map10ShardedMap11queue_loadsEv"></span><span id="sharded_map::ShardedMap::queue_loadsC"></span><span class="target" id="classsharded__map_1_1ShardedMap_1a344d50357c2f55b831f22155a1953c5c"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">size_t</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">queue_loads</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK11sharded_map10ShardedMap11queue_loadsEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the number of elements in each queue. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK11sharded_map10ShardedMap9map_loadsEv">
<span id="_CPPv3NK11sharded_map10ShardedMap9map_loadsEv"></span><span id="_CPPv2NK11sharded_map10ShardedMap9map_loadsEv"></span><span id="sharded_map::ShardedMap::map_loadsC"></span><span class="target" id="classsharded__map_1_1ShardedMap_1aa2279e7a6376ef80fe9fa856b9ed9083"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">size_t</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">map_loads</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK11sharded_map10ShardedMap9map_loadsEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the number of elements in each map. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap7barrierEv">
<span id="_CPPv3N11sharded_map10ShardedMap7barrierEv"></span><span id="_CPPv2N11sharded_map10ShardedMap7barrierEv"></span><span id="sharded_map::ShardedMap::barrier"></span><span class="target" id="classsharded__map_1_1ShardedMap_1ac09c3b031e3fcbf3b2895294efbd4c9d"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">barrier</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">decltype</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">FN</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-name descname"><span class="n"><span class="pre">barrier</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap7barrierEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return a reference to the thread barrier used by this map. </p>
<p>Note that if you call <code class="docutils literal notranslate"><span class="pre">reset_barrier</span></code>, the reference returned by this function is invalidated! </p>
</dd></dl>

</div>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap5ShardE">
<span id="_CPPv3N11sharded_map10ShardedMap5ShardE"></span><span id="_CPPv2N11sharded_map10ShardedMap5ShardE"></span><span id="sharded_map::ShardedMap::Shard"></span><span class="target" id="classsharded__map_1_1ShardedMap_1_1Shard"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Shard</span></span></span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap5ShardE" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap5Shard5ShardER10ShardedMap6size_t">
<span id="_CPPv3N11sharded_map10ShardedMap5Shard5ShardER10ShardedMap6size_t"></span><span id="_CPPv2N11sharded_map10ShardedMap5Shard5ShardER10ShardedMap6size_t"></span><span id="sharded_map::ShardedMap::Shard::Shard__ShardedMapR.s"></span><span class="target" id="classsharded__map_1_1ShardedMap_1_1Shard_1a1b1692adfe109d62c89fcdab8daf0085"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Shard</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap"><span class="n"><span class="pre">ShardedMap</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">sharded_map</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">thread_id</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap5Shard5ShardER10ShardedMap6size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create a new shard for the given thread. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sharded_map</strong> – The sharded map to which the shard belongs. </p></li>
<li><p><strong>thread_id</strong> – The thread’s id. Must be less than <code class="docutils literal notranslate"><span class="pre">thread_count</span></code> in the sharded map. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap5Shard23insert_or_update_directERK1KRR10InputValue">
<span id="_CPPv3N11sharded_map10ShardedMap5Shard23insert_or_update_directERK1KRR10InputValue"></span><span id="_CPPv2N11sharded_map10ShardedMap5Shard23insert_or_update_directERK1KRR10InputValue"></span><span id="sharded_map::ShardedMap::Shard::insert_or_update_direct__KCR.InputValueRR"></span><span class="target" id="classsharded__map_1_1ShardedMap_1_1Shard_1ac35421e311b6fdfa952f731201787890"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">insert_or_update_direct</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">k</span></span>, <span class="n"><span class="pre">InputValue</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">in_value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap5Shard23insert_or_update_directERK1KRR10InputValue" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Inserts or updates a new value in the map, depending on whether. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>k</strong> – The key to insert or update a value for. </p></li>
<li><p><strong>in_value</strong> – The value with which to insert or update. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap5Shard17handle_queue_syncEb">
<span id="_CPPv3N11sharded_map10ShardedMap5Shard17handle_queue_syncEb"></span><span id="_CPPv2N11sharded_map10ShardedMap5Shard17handle_queue_syncEb"></span><span id="sharded_map::ShardedMap::Shard::handle_queue_sync__b"></span><span class="target" id="classsharded__map_1_1ShardedMap_1_1Shard_1a3f5531a442af02d26450257263cfba5d"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">handle_queue_sync</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">cause_wait</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap5Shard17handle_queue_syncEb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Handles this thread’s queue synchronously with other threads, inserting or updating all values in its queue. </p>
<p>This thread will wait until all other threads also call this method before starting to handle the queues.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cause_wait</strong> – If true, this will force other threads to handle their queues when they call insert. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap5Shard18handle_queue_asyncEv">
<span id="_CPPv3N11sharded_map10ShardedMap5Shard18handle_queue_asyncEv"></span><span id="_CPPv2N11sharded_map10ShardedMap5Shard18handle_queue_asyncEv"></span><span id="sharded_map::ShardedMap::Shard::handle_queue_async"></span><span class="target" id="classsharded__map_1_1ShardedMap_1_1Shard_1aba0782967eaa97631b2df067ea88f5a4"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">handle_queue_async</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap5Shard18handle_queue_asyncEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Handles this thread’s queue, inserting or updating all values in its queue. </p>
<p>Warning: This should not be called while other threads are inserting into this thread’s queue! </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap5Shard6insertERR16QueueStoredValue">
<span id="_CPPv3N11sharded_map10ShardedMap5Shard6insertERR16QueueStoredValue"></span><span id="_CPPv2N11sharded_map10ShardedMap5Shard6insertERR16QueueStoredValue"></span><span id="sharded_map::ShardedMap::Shard::insert__QueueStoredValueRR"></span><span class="target" id="classsharded__map_1_1ShardedMap_1_1Shard_1aa4ed70764079d84ffc5730408fd43163"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">insert</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QueueStoredValue</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">pair</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap5Shard6insertERR16QueueStoredValue" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Inserts or updates a new value in the map. </p>
<p>If the value is inserted into the current thread’s map, it is inserted immediately. If not, then it is added to that thread’s queue. It will only be inserted into the map, once the thread comes around to handle its queue using the handle_queue method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pair</strong> – The key-value pair to insert or update. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N11sharded_map10ShardedMap5Shard6insertERK1K10InputValue">
<span id="_CPPv3N11sharded_map10ShardedMap5Shard6insertERK1K10InputValue"></span><span id="_CPPv2N11sharded_map10ShardedMap5Shard6insertERK1K10InputValue"></span><span id="sharded_map::ShardedMap::Shard::insert__KCR.InputValue"></span><span class="target" id="classsharded__map_1_1ShardedMap_1_1Shard_1aaac0b6e8dece2f829b0a6a199655fdd5"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">insert</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_NSt18copy_constructibleE_NSt18move_constructibleEI00DpE0_14UpdateFunctionI1K1VEEN11sharded_map10ShardedMapE" title="sharded_map::ShardedMap::K"><span class="n"><span class="pre">K</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">key</span></span>, <span class="n"><span class="pre">InputValue</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N11sharded_map10ShardedMap5Shard6insertERK1K10InputValue" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Inserts or updates a new value in the map. </p>
<p>If the value is inserted into the current thread’s map, it is inserted immediately. If not, then it is added to that thread’s queue. It will only be inserted into the map, once the thread comes around to handle its queue using the handle_queue method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – The key of the value to insert. </p></li>
<li><p><strong>value</strong> – The value to associate with the key. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="classsharded__map_1_1ShardedMap_1_1Shard.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Class ShardedMap::Shard</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="structsharded__map_1_1util_1_1unify__ints.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Template Struct unify_ints</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Skadic
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Template Class ShardedMap</a><ul>
<li><a class="reference internal" href="#nested-relationships">Nested Relationships</a><ul>
<li><a class="reference internal" href="#nested-types">Nested Types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#class-documentation">Class Documentation</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../_static/bootstrap-treeview/bootstrap-treeview.min.js?v=6a1e96b4"></script>
    </body>
</html>